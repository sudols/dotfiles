#################################
#       General Settings        #
#################################

backend = "glx";
vsync = true;
detect-rounded-corners = true;
detect-client-opacity = true;
detect-transient = true;
detect-client-leader = true;

#################################
#           Fading              #
#################################

fading = true;
fade-in-step = 0.08;
fade-out-step = 0.08;

#################################
#          Animations           #
#################################

animations = (
  {
    triggers = ["geometry"];
    offset-x = {
      curve = "cubic-bezier(0.07, 0.65, 0, 1)";
      duration = 0.3;
      start = "window-x-before - window-x";
      end = 0;
    };
    offset-y = {
      curve = "cubic-bezier(0.07, 0.65, 0, 1)";
      duration = 0.3;
      start = "window-y-before - window-y";
      end = 0;
    };
    scale-x = {
      curve = "cubic-bezier(0.07, 0.65, 0, 1)";
      duration = 0.3;
      start = "window-width-before / window-width";
      end = 1;
    };
    scale-y = {
      curve = "cubic-bezier(0.07, 0.65, 0, 1)";
      duration = 0.3;
      start = "window-height-before / window-height";
      end = 1;
    };
  }
);


#################################
#       Window Rules            #
#################################

rules = ({
  # Base rule: all windows get rounded corners
  corner-radius = 8;
}, {
  # Exclude shadows for specific windows
  match = "name = 'Notification' || class_g = 'Conky' || class_g ?= 'Notify-osd' || class_g = 'Cairo-clock' || _GTK_FRAME_EXTENTS@:c";
  shadow = false;
}, {
  # No animations for these window types
  match = "window_type = 'dropdown_menu' || window_type = 'popup_menu' || window_type = 'popup' || window_type = 'tooltip' || window_type = 'dock' || window_type = 'menu' || window_type = 'toolbar'";
  animations = ({
    triggers = ["open", "show", "close", "hide"];
  });
}, {
  # No animations for these applications
  match = "class_g = 'Conky' || class_g = 'Cairo-clock' || class_g = 'slop' || class_g = 'Polybar' || class_g = 'Retroarch' || class_g = 'flameshot'";
  animations = ({
    triggers = ["open", "show", "close", "hide"];
  });
}, {
  # Dialog windows: slide-down animation
  match = "window_type = 'dialog'";
  animations = ({
    triggers = ["open", "show"];
    preset = "slide-in";
    direction = "down";
    duration = 0.3;
  }, {
    triggers = ["close", "hide"];
    preset = "slide-out";
    direction = "down";
    duration = 0.25;
  });
});
